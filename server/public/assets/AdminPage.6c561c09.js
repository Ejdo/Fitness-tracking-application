import{Q as d,a as A}from"./QBtn.d1f140d8.js";import{Q as U}from"./QTable.77361f1e.js";import{Q as w,a as u}from"./QCard.6354ec78.js";import{Q as i}from"./QInput.d4f7eab6.js";import{Q as j}from"./QCheckbox.50ec8d59.js";import{k as y,h as T}from"./QDialog.5f70cc3d.js";import{Q as k,C as x}from"./ClosePopup.d1c8af6a.js";import{e as D,Q as E}from"./export-file.36fee849.js";import{u as B}from"./admin-users-store.3c6ee917.js";import{a as H}from"./axios.cbf05cdc.js";import{_ as N,y as p,g as V,o as R,H as _,q as s,w as t,I as r,E as q}from"./index.10d3f647.js";import"./dom.543f5459.js";import"./use-dark.f3ad74a0.js";import"./scroll.fe020b7e.js";import"./use-key-composition.28abccc9.js";import"./focus-manager.387b0375.js";import"./AuthService.db15acf2.js";const C=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"admin",label:"Admin",field:"admin",align:"left",sortable:!0},{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"email",align:"left",label:"Email",field:"email"},{name:"password",align:"left",label:"Password",field:"password"},{name:"age",align:"left",label:"Age",field:"age",sortable:!0},{name:"height",align:"left",label:"Height",field:"height",sortable:!0}];function Q(n,e,b){let l=e!==void 0?e(n,b):n;return l=l==null?"":String(l),l=l.split('"').join('""'),`"${l}"`}const L={data(){return{user:{email:"",admin:!1,password:"",passwordConfirmation:"",username:"",age:0,height:0}}},setup(){var n=p(!1),e=p(!1);const b=p(!1),l=p(!0);var a=p([]),g=p([]);const o=B(),S=V(()=>o.getUsers),P=V(()=>o.getAds),I=V(()=>H.getToken());return{adminStore:o,ads:P,columns:C,card:n,cardAd:e,selected:a,selectedAds:g,users:S,uploadCard:b,authToken:I,isPwd:l,advertisement:{image_url:"",target_url:""},deleteUsers(){var f=a.value.map(v=>v.id);this.adminStore.deleteUsers(f)},deleteAds(){var f=g.value.map(v=>v.id);this.adminStore.deleteAds(f)},exportTable(){const f=[C.map(c=>Q(c.name))].concat(this.users.map(c=>C.map(m=>Q(typeof m.field=="function"?m.field(c):c[m.field===void 0?m.name:m.field],m.format,c)).join(","))).join(`\r
`),v=D("table-export.csv",f,"text/csv");console.log(v)}}},mounted(){this.adminStore.refreshUsers(),this.adminStore.refreshAds()}},h={class:"q-pa-xl"},z={class:"q-my-md"},M={class:"q-gutter-md q-my-md"},F={class:"q-my-md"},G={class:"q-gutter-md q-my-md"},J=r("div",{class:"row no-wrap items-center"},[r("div",{class:"col text-h6 ellipsis"}," Add User ")],-1),K={class:"column justify-center q-gutter-md"},O={class:"row justify-between content-between"},W=r("div",{class:"row no-wrap items-center"},[r("div",{class:"col text-h6 ellipsis"}," Upload CSV ")],-1),X=r("div",{class:"row no-wrap items-center"},[r("div",{class:"col text-h6 ellipsis"}," Add advertisement ")],-1),Y={class:"row justify-between content-between q-gutter-md"};function Z(n,e,b,l,a,g){return R(),_("div",h,[s(U,{title:"Users",rows:l.users,columns:l.columns,"row-key":"id","virtual-scroll":"",style:{"max-height":"400px"},class:"my-sticky-virtscroll-table q-mb-lg",selection:"multiple",selected:l.selected,"onUpdate:selected":e[6]||(e[6]=o=>l.selected=o)},{bottom:t(()=>[r("div",z,[s(d,{color:"primary",label:"Add user",onClick:e[0]||(e[0]=o=>l.card=!0),class:"q-mr-md"}),s(d,{color:"primary",label:"Delete user",onClick:e[1]||(e[1]=o=>l.deleteUsers()),class:"q-mr-md"}),s(d,{color:"primary","icon-right":"file_download",label:"Export to csv",onClick:e[2]||(e[2]=o=>l.exportTable()),"no-caps":"",class:"q-mr-md"}),s(d,{color:"primary","icon-right":"file_upload",label:"Import csv",onClick:e[3]||(e[3]=o=>l.uploadCard=!0),"no-caps":""})])]),"no-data":t(()=>[r("div",M,[s(d,{color:"primary",label:"Add user",onClick:e[4]||(e[4]=o=>l.card=!0),class:"q-mr-md"}),s(d,{color:"primary","icon-right":"file_upload",label:"Import csv",onClick:e[5]||(e[5]=o=>l.uploadCard=!0),"no-caps":""})])]),_:1},8,["rows","columns","selected"]),s(U,{title:"Advertisements",rows:l.ads,columns:n.adColumns,"row-key":"id","virtual-scroll":"",style:{"max-height":"400px"},class:"my-sticky-virtscroll-table",selection:"multiple",selected:l.selectedAds,"onUpdate:selected":e[10]||(e[10]=o=>l.selectedAds=o)},{bottom:t(()=>[r("div",F,[s(d,{color:"primary",label:"Add advertisement",onClick:e[7]||(e[7]=o=>l.cardAd=!0),class:"q-mr-md"}),s(d,{color:"primary",label:"Delete advertisement",onClick:e[8]||(e[8]=o=>l.deleteAds()),class:"q-mr-md"})])]),"no-data":t(()=>[r("div",G,[s(d,{color:"primary",label:"Add advertisement",onClick:e[9]||(e[9]=o=>l.cardAd=!0),class:"q-mr-md"})])]),_:1},8,["rows","columns","selected"]),s(y,{modelValue:l.card,"onUpdate:modelValue":e[21]||(e[21]=o=>l.card=o)},{default:t(()=>[s(w,{class:"my-card"},{default:t(()=>[s(u,null,{default:t(()=>[J]),_:1}),s(u,{class:"q-pt-none column justify-center"},{default:t(()=>[r("div",K,[s(i,{outlined:"",modelValue:a.user.email,"onUpdate:modelValue":e[11]||(e[11]=o=>a.user.email=o),class:"col-12",label:"Email",type:"email"},null,8,["modelValue"]),s(i,{outlined:"",modelValue:a.user.username,"onUpdate:modelValue":e[12]||(e[12]=o=>a.user.username=o),class:"col-12",label:"Username"},null,8,["modelValue"]),r("div",O,[s(i,{outlined:"",modelValue:a.user.age,"onUpdate:modelValue":e[13]||(e[13]=o=>a.user.age=o),class:"col-sm q-mr-md",label:"Age",type:"number"},null,8,["modelValue"]),s(i,{outlined:"",modelValue:a.user.height,"onUpdate:modelValue":e[14]||(e[14]=o=>a.user.height=o),class:"col-sm",label:"Height",type:"number"},null,8,["modelValue"])]),s(i,{outlined:"",modelValue:a.user.password,"onUpdate:modelValue":e[16]||(e[16]=o=>a.user.password=o),class:"col-12",type:l.isPwd?"password":"text",label:"Password"},{append:t(()=>[s(A,{name:l.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[15]||(e[15]=o=>l.isPwd=!l.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"]),s(i,{outlined:"",modelValue:a.user.passwordConfirmation,"onUpdate:modelValue":e[18]||(e[18]=o=>a.user.passwordConfirmation=o),class:"col-12",type:l.isPwd?"password":"text",label:"Repeat password"},{append:t(()=>[s(A,{name:l.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[17]||(e[17]=o=>l.isPwd=!l.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"]),s(j,{modelValue:a.user.admin,"onUpdate:modelValue":e[19]||(e[19]=o=>a.user.admin=o),label:"Is admin"},null,8,["modelValue"])])]),_:1}),s(T),s(k,{align:"right"},{default:t(()=>[q(s(d,{flat:"",color:"primary",label:"Add",onClick:e[20]||(e[20]=o=>l.adminStore.addUser(a.user))},null,512),[[x]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(y,{modelValue:l.uploadCard,"onUpdate:modelValue":e[23]||(e[23]=o=>l.uploadCard=o)},{default:t(()=>[s(w,{class:"my-card"},{default:t(()=>[s(u,null,{default:t(()=>[W]),_:1}),s(u,null,{default:t(()=>[s(E,{style:{"max-width":"300px"},url:"http://localhost:8080/admin/importUsers",headers:[{name:"Authorization",value:l.authToken}],label:"Select a CSV file",multiple:"","auto-upload":"",accept:".csv","max-files":"1",onUploaded:e[22]||(e[22]=o=>l.adminStore.refreshUsers())},null,8,["headers"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(y,{modelValue:l.cardAd,"onUpdate:modelValue":e[27]||(e[27]=o=>l.cardAd=o)},{default:t(()=>[s(w,{class:"my-card"},{default:t(()=>[s(u,null,{default:t(()=>[X]),_:1}),s(u,null,{default:t(()=>[r("div",Y,[s(i,{outlined:"",modelValue:l.advertisement.image_url,"onUpdate:modelValue":e[24]||(e[24]=o=>l.advertisement.image_url=o),class:"col-sm",label:"Image URL"},null,8,["modelValue"]),s(i,{outlined:"",modelValue:l.advertisement.target_url,"onUpdate:modelValue":e[25]||(e[25]=o=>l.advertisement.target_url=o),class:"col-sm",label:"Target URL"},null,8,["modelValue"])])]),_:1}),s(k,{align:"right"},{default:t(()=>[q(s(d,{flat:"",color:"primary",label:"Add",onClick:e[26]||(e[26]=o=>l.adminStore.addAd(l.advertisement))},null,512),[[x]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var ge=N(L,[["render",Z]]);export{ge as default};
